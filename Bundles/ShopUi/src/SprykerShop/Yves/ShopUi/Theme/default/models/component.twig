{#
 #
 #
 # Component API
 #}

{%- define config = {
    name: required,
    tag: 'div',
    selector: '',
    renderClass: true,
    renderAttributes: true
} -%}
{%- define data = {} -%}
{%- define embed = {} -%}

{%- set class = class | default('') -%}
{%- define modifiers = [] -%}
{%- define attributes = {} -%}

{% block component %}
    {%- set config = config | merge({
        selector: config.selector is empty ? ('js-' ~ config.name) : config.selector
    }) -%}

    <{{-config.tag}} class="
        {%- if config.name == config.tag and '-' in config.tag -%}custom-element {% endif -%}
        {%- if config.renderClass -%}
            {%- block class -%}
                {{config.name | trim-}} 
                {%- for modifier in modifiers -%}{%- if modifier | trim is not empty %} {{config.name}}--{{modifier | trim}}{% endif -%}{% endfor -%}
                {%- if class %} {{class-}}{% endif -%}
            {%- endblock -%}
        {%- endif -%}"

        {% if config.renderAttributes -%}
            {%- block attributes -%}
                {%- for name, value in attributes -%}
                    {%- if value is sameas(true) -%}
                        {{-' ' ~ name-}}
                    {%- elseif value is not sameas(false) -%}
                        {{-' ' ~ name-}}='{{-value-}}'
                    {%- endif -%}
                {%- endfor -%}
            {%- endblock -%}
        {%- endif -%}
        
        {%- block extraAttributes -%}{%- endblock -%}>
            {%- block body -%}{%- endblock -%}
    </{{-config.tag-}}>
{% endblock -%}
