{% extends model('base') %}

{#
 #
 #
 # Component API
 #}

{%- define config = {
    name: required,
    tag: 'div',
    selector: ''
} -%}
{%- define data = {} -%}
{%- define embed = {} -%}

{%- set class = class | default('') -%}
{%- define modifiers = [] -%}
{%- define attributes = {} -%}

{% block model %}
    {%- set config = config | merge({
        selector: config.selector is empty ? ('js-' ~ config.name) : config.selector
    }) -%}

    {{parent()}}
{% endblock -%}

{%- block protected -%}
    {# render custom component class #}
    {%- block renderCustomComponentClass -%}
        {%- if config.name == config.tag and '-' in config.tag -%}custom-element {% endif -%}
    {%- endblock -%}

    {# render BEM classes (block and modifiers) according to the name #}
    {%- block renderClass -%}
        {{config.name | trim-}} 
        {%- for modifier in modifiers -%}{%- if modifier | trim is not empty %} {{config.name}}--{{modifier | trim}}{% endif -%}{% endfor -%}
        {%- if class %} {{class-}}{% endif -%}
    {%- endblock -%}

    {# render html5 attributes #}
    {%- block renderAttributes -%}
        {%- for attrname, attrvalue in attributes -%}
            {%- if attrvalue is sameas(true) -%}
                {{-' ' ~ attrname-}}
            {%- elseif attrvalue is not sameas(false) -%}
                {{-' ' ~ attrname-}}='{{-attrvalue-}}'
            {%- endif -%}
        {%- endfor -%}
    {%- endblock -%}
{%- endblock -%}

{%- block render -%}
    <{{-config.tag}} 
        class="{{-block('renderCustomComponentClass')-}}{%- block class -%}{{-block('renderClass')-}}{%- endblock -%}"
        {% block attributes -%}{{-block('renderAttributes')-}}{%- endblock -%}>
        {{parent()}}
    </{{-config.tag-}}>
{%- endblock -%}
