{% extends model('component') %}

{% define config = {
    name: 'product-card',
    tag: 'article'
} %}

{% define data = {
    name: required,
    abstractId: required,
    url: required,
    imageUrl: required,
    price: required,
    originalPrice: null
} %}

{% block body %}
    <div class="{{config.name}}__container box box--stretch">   
        {% block image %}
            <a href="{{data.url}}">
                {% include atom('thumbnail') with {
                    attributes: {
                        alt: data.name,
                        src: data.imageUrl,
                        title: data.name
                    }
                } only %}
            </a>
        {% endblock %}

        {% block labels %}
            {{ widget('ProductAbstractLabelWidgetPlugin', data.abstractId) }}
        {% endblock %}

        {% block groups %}
            {{ widget('ProductGroupWidgetPlugin', data.abstractId) }}
        {% endblock %}

        {% block name %}
            <strong>{{data.name}}</strong>
        {% endblock %}

        {% block rating %}
            {{ widget('ProductAbstractReviewWidgetPlugin', data.abstractId) }}
        {% endblock %}

        {% block price %}
            <p>
                {% include molecule('price') with {
                    data: {
                        amount: data.price | money,
                        originalAmount: data.originalPrice is empty ? null : (data.originalPrice | money)
                    }
                } only %}
            </p>
        {% endblock %}

        {% block actionsContainer %}
            <div class="{{config.name}}__actions-container">
                {% block actions %}
                    <a class="button button--expand" href="{{data.url}}">
                        {{'product.view' | trans}} 
                        {% include atom('icon') with {
                            modifiers: ['small'],
                            data: {
                                name: 'angle-double-right'
                            }
                        } only %}
                    </a>
                {% endblock %}
            </div>
        {% endblock %}
    </div>
{% endblock %}
