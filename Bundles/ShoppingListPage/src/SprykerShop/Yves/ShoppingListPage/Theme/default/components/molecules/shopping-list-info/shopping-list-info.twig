{% extends model('component') %}

{% define config = {
    name: 'shopping-list-info'
} %}

{% define data = {
    shoppingList: required
} %}

{% block body %}

    {% set hasWritePermission = can('WriteShoppingListPermissionPlugin', data.shoppingList.idShoppingList) %}

    <div class="grid">
        <div class="col col--sm-12 col--md-6 col--lg-4">
            <b>{{ 'customer.account.shopping_list.overview.owner' | trans }}</b>: {{ data.shoppingList.owner }}
        </div>
        <div class="col col--sm-12 col--md-6 col--lg-4">
            <b>{{ 'customer.account.shopping_list.access' | trans }}</b>:

            {% include molecule('shopping-list-permission', 'ShoppingListPage') with {
                data: {
                    hasWritePermission: hasWritePermission
                }
            } only %}

        </div>
        {% block sharedBlock %}
            <div class="col col--sm-12 col--md-6 col--lg-4">
                <b>{{ 'customer.account.shopping_list.overview.shared_with' | trans }}</b>:
                {% if can('WriteShoppingListPermissionPlugin', data.shoppingList.idShoppingList) %}
                    <a href="{{ url('shopping-list/share', { idShoppingList: data.shoppingList.idShoppingList }) }}">
                        {{ data.shoppingList.sharedCompanyUsers.count ~ ' ' ~ 'company.account.company_user' | trans }},
                        {{ data.shoppingList.sharedCompanyBusinessUnits.count ~ ' ' ~ 'company.account.business_unit' | trans }}
                    </a>
                {% else %}
                    <span>
                        {{ data.shoppingList.sharedCompanyUsers.count ~ ' ' ~ 'company.account.company_user' | trans }},
                        {{ data.shoppingList.sharedCompanyBusinessUnits.count ~ ' ' ~ 'company.account.business_unit' | trans }}
                    </span>
                {% endif %}
            </div>
        {% endblock %}
    </div>

    {#<div class="grid">#}
        {#<div class="col col--sm-4">#}
            {#<strong>{{ 'customer.account.shopping_list.overview.owner' | trans }}:</strong>#}
            {#{{ data.owner }}#}
        {#</div>#}
        {#<div class="col col--sm-4">#}
            {#<strong>{{ 'customer.account.shopping_list.access' | trans }}:</strong>#}
            {#{% if can('WriteShoppingListPermissionPlugin', data.idShoppingList) %}#}
                {#{{ 'customer.account.shopping_list.access.full_access' | trans }}#}
            {#{% else %}#}
                {#{{ 'customer.account.shopping_list.access.read_only' | trans }}#}
            {#{% endif %}#}
        {#</div>#}
    {#</div>#}
{% endblock %}
